---
layout: post
title: 使用vmstat，iostat查看系统性能【转】
date: '2010-12-14'
comments: true
---
vmstat参数：

procs -----------memory---------- ---swap-- -----io---- --system-- ----cpu----
r  b   swpd   free   buff  cache     si   so    bi    bo   in    cs us sy id wa
0  1    208 1685712 213052 3883248    0    0     8     7    0     0  1  1 88 10
0  2    208 1685808 213056 3883244    0    0     4  2288 1480   209  0  0 68 32
0  0    208 1685808 213060 3883240    0    0     4  2984 1515   173  0  0 76 24
0  0    208 1685888 213068 3883232    0    0     0    24 1222   138  0  0 99  0
0  0    208 1685952 213068 3883232    0    0     0     0 1079    90  0  0 100  0
0  0    208 1686032 213068 3883232    0    0     0     0 1078    77  0  0 100  0
0  0    208 1686032 213068 3883232    0    0     0   896 1077    58  0  0 99  1
-r 列表示运行和等待cpu时间片的进程数，如果长期大于1，说明cpu不足，需要增加cpu。
-us 列显示了用户方式下所花费CPU 时间的百分比。us的值比较高时，说明用户进程消耗的cpu时间多，但是如果长期大于50%，需要考虑优化用户的程序。
-sy 列显示了内核进程所花费的cpu时间的百分比。这里us + sy的参考值为80%，如果us+sy 大于 80%说明可能存在CPU不足。
-wa 列显示了IO等待所占用的CPU时间的百分比。这里wa的参考值为30%，如果wa超过30%，说明IO等待严重，这可能是磁盘大量随机访问造成的，也可能磁盘或者磁盘访问控制器的带宽瓶颈造成的(主要是块操作)。
-swpd 切换到内存交换区的内存数量(k表示)。如果swpd的值不为0，或者比较大，比如超过了100m，只要si、so的值长期为0，系统性能还是正常
-bi 从块设备读入数据的总量（读磁盘）（每秒kb）。
-bo 块设备写入数据的总量（写磁盘）（每秒kb）
这里我们设置的bi+bo参考值为1000，如果超过1000，而且wa值较大应该考虑均衡磁盘负载
-in 每秒产生的中断次数
-cs  每秒产生的上下文切换次数这两个值越大，内核消耗cpu时间越大
-id cpu处于空%
